### Опции командной строки

Все программы **Emonoda** (кроме [хуков](hooks)) поддерживают общий набор базовых опций:

* **`-h, --help`**
    * Выводит краткую справку.

* **`-c, --config <path/to/file>`**
    * Устанавливает путь к конфигурационному файлу, по умолчанию - `~/.config/emonoda.yaml`.

* **`-o, --set-options <sec/sub/opt=value ...>`**
    * Переопределяет параметры из конфига для единичного запуска команды. Вложенные ямловые ключи разделяются слешем, значение устанавливается после знака равенства. Можно передавать несколько параметров через пробел.

* **`-m, --dump-config`**
    * Выводит дамп конфигурации в виде YAML с комментариями.


***
### Конфигурационный файл

Вся система настраивается через единственный файл `~/.config/emonoda.yaml`. Его содержимое делится на секции, в которых описываются одиночные ключи, списки или пары вида ключ-значение. Для описания параметров в рамках одной секции используется отступ из четырех или двух пробелов. Комментарий отделяется символом `#`. Например:

```yaml
core:  # Корневая секция
    client: rtorrent  # Параметр client в секции core со значением rtorrent

trackers:  # Другая корневая секция
    rutor.org:  # Подсекция
        timeout: 5  # Параметр
```

Для обозначения подобных вложенных параметров в этой документации часто будет использоваться такая запись: `core/client=rtorrent` или `trackers/rutor.org/timeout=5.0`.

Этот же синтаксис используется для передачи значения параметров в опцию `-o/--set-options`: `--set-options core/client=rtorrent trackers/rutor.org/timeout=5`. Через знак равенства указываются значения по умолчанию; `null`, `[]` или `{}` обозначают отключенную функцию.


***
### Основные параметры

Команды [emfile](emfile) и [emdiff](emdiff) могут работать с конфигурацией по умолчанию, однако для всех остальных утилит вам потребуется настроить [интеграцию с клиентом](clients), а также указать пути к каталогам с торрент-файлами и данными.

Конфигурация делится на несколько секций. Одна их часть является общими параметрами, другия же относятся непосредственно к каждой отдельной программе. Ниже приведен минимальный пример файла `~/.config/emonoda.yaml`, содержащий простые настройки для торрент-клиента и трех трекеров. С такой конфигурацией вы сможете пользоваться всеми программами **Emonoda**. Трекеры необходимы только для [emupdate](emupdate).

```yaml
core:
    torrents_dir: /home/user/torrents  # Каталог с торрент-файлами
    data_root_dir: /home/user/Downloads  # Каталог, куда скачиваются данные
    client: rtorrent  # Имя плагина для клиента

trackers:
    rutracker.org:
        user: yourlogin
        passwd: 12345

    nnm-club.me:
        user: yourlogin
        passwd: 12345

    tr.anidub.com:
        user: yourlogin
        passwd: 12345
```

!!! info
    Полный список всех секций и параметров (в том числе и для выбранных плагинов) вы всегда можете посмотреть с помощью команды `emfile -m`. Параметры секции `core` и `client` действуют на все программы.

* **`core/client=""`**
    * Плагин используемого [клиента](clients).

* **`core/torrents_dir=.`**
    * Путь к каталогу, где лежат торрент-файлы.

* **`core/use_colors=true`**
    * Параметр разрешает использование цветов при выводе на терминал.

* **`core/force_colors=false`**
    * При использовании `core/use_colors` программа будет раскрашивать свой вывод, если он направлен в терминал. При перенаправлении в файл раскрашивание отключается, однако при `core/force_colors=true` вывод будет раскрашиваться всегда.

* **`core/data_root_dir=~/Downloads`**
    * Корневой каталог с данными торрентов. В его подкаталоги [emload](emload) загружает новые данные, а [emfind](emfind) индексирует их.

* **`core/another_data_root_dirs=[]`**
    * Дополнительный список каталогов, где находятся уже загруженные ранее торренты. Этот параметр полезен, если до установки **Emonoda** и использования [emload](emload) данные качались по разным путям. Он добавляет указанные каталоги для поиска с помощью [emfind](emfind).

| Секция | Описание |
|--------|----------|
| `core` | Общие параметры системы - имя плагина торрент-клиента, пути к каталогам, настройки вывода на терминал. |
| `client` | Специфические параметры клиента. Содержимое секции зависит от используемого плагина, указанного в `core/client`. Подробнее смотрите на странице [clients](clients). |
| `trackers` | Список трекеров с логинами и паролями, использующийся в [emupdate](emupdate), чтобы обновлять торренты. Подробнее смотрите на странице [trackers](trackers). |
| `confetti` | Список плагинов для отправки оповещений о результатах работы [emupdate](emupdate) (например, по почте). |
| `emupdate` | Специфические параметры [emupdate](emupdate). |
| `emfile` | Специфические параметры [emfile](emfile). |
| `emfind` | Специфические параметры [emfind](emfind). |
| `emload` | Специфические параметры [emload](emload). |

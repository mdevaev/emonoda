### Описание

**emfile** - команда для извлечения метаданных из торрент-файла. Запущенная без опций, она выводит список всех полей в человекочитаемом формате, а с опциями - только конкретное поле без пояснений, что очень удобно для использования в скриптах.

***

### Опции

!!! info
    Кроме собственных опций, указанных ниже, **emfile** поддерживает общий набор стандартных опций (таких, как `--help` и `--config`). За подробностями обращайтесь на страницу [config](config).

* **`-v, --verbose`**
    * Включает отладочные сообщения, направляемые в stderr.

* **`--path`**
    * Вывести путь к файлу.

* **`--hash`**
    * Вывести имя раздачи.

* **`--comment`**
    * Вывести комментарий о раздаче. Если такого поля в торренте нет, будет выведена пустая строка. Обычно в комментариях указывают ссылку на страницу, откуда был скачан торрент.

* **`--size`**
    * Вывести размер данных торрента в байтах.

* **`--size-pretty`**
    * Вывести размер данных в читаемом виде (например - 10 Gb).

* **`--announce`**
    * Вывести адрес трекера.

***

* **`--announce-list`**
    * Вывести список дополнительных трекеров, по одному на каждую строку.

* **`--announce-list-pretty`**
    * Вывести список трекеров, разделенный пробелами, в одну строку.

* **`--creation-date`**
    * Вывести время создания торрент-файла в секундах unixtime.

* **`--creation-date-pretty`**
    * Вывести время создания торрент-файла в читаемом формате.

* **`--created-by`**
    * Вывести название и версию программы, в которой был создан торрент.

!!! info
    Не все торрент-файлы имеют поля метаданных, требующиеся опциям `--announce-list*`, `--creation-date*` и `--created-by`. В случае, если их нет, **emfile** выведет пустую строку (с хедером или без него)

***

* **`--provides`**
    * Вывести список файлов в торренте.

* **`--is-private`**
    * Вывести `1`, если для торрента запрещен DHT, иначе вывести `0`.

* **`--is-private-pretty`**
    * Вывести `yes`, если для торрента запрещен DHT, иначе вывести `no`.

***

* **`--client-path`**
    * Вывести полный путь на файловой системе к данным торрента, включая имя файла или каталога, предоставленного им. Торрент должен быть добавлен в ваш клиент.

* **`--client-prefix`**
    * Вывести префикс к данным торрента.

* **`--client-customs`**
    * Вывести кастомные поля с информацией, назнеойченн на торрент. Требуемые поля определяются параметром `emfile/show_customs` (об этом ниже). Ключ и значение отделяются знаком равенства, и значение может автоматически экранироваться так, чтобы было удобно помещать его в переменную в шелле.


!!! info
    Поля опций `--client-*` выводятся для тех торрентов, которые были загружены в клиент. Кроме того, для использования этой возможности вы должны [настроить](config) [интеграцию с клиентом](clients).


***

* **`--make-magnet`**
    * Сделать из торрента magnet-ссылку.

* **`--magnet-fields <opt1 opt2 ...>`**
    * Употребляется вместе с предыдущей опцией. Указывает список полей (через пробел) с дополнительной информацией, в которые можно включить в ссылку. Доступны следующие поля:
    * `name` - имя торрента;
    * `trackers` - адреса трекеров;
    * `size` - размер данных торрента.

        !!! error "ВАЖНО!"
            Многие популярные трекеры не являются анонимными. В их адреса включается [пасскей](http://rutracker.org/forum/viewtopic.php?t=3396341), позволяющий идентифицировать вас. Публикация торрент-файла или magnet-ссылки с трекером **может вас деанонимизировать**. Кроме того, злоумышленник может использовать ваш пасскей для накрутки собственного рейтинга. Включайте трекеры в magnet-ссылку только тогда, когда вы точно уверены, что это вам не навредит.

* **`--without-headers`**
    * Если указана вместе с любой из опций вывода полей, то **emfile** выведет только значение поля без его названия, что удобно для скриптов.

        !!! info
            Порядок выведения полей соответствует порядку указания опций вывода, причем не важно, указана опция `--without-headers`, или нет.


***
### Конфигурационные параметры

Общие параметры и способ настройки описаны на странице [config](config), здесь же приведены специфические параметры программы.

* **`emfile/show_customs=[]`**
    * Список кастомных полей, которые должны быть выведены в графе `Client customs`, если настроена [интеграция с клиентом](clients).


***
### Примеры использования

Просмотреть все данные о торренте:

```
$ emfile archlinux-2013.10.01-dual.iso.torrent
Path:           archlinux-2013.10.01-dual.iso.torrent
Name:           archlinux-2013.10.01-dual.iso
Hash:           4343552155062db9a7a05a10904f5c68f98b1216
Size:           529.0 MB
Announce:       http://tracker.archlinux.org:6969/announce
Announce list:
Creation date:  2013-10-01 04:07:29
Created by:     mktorrent 1.0
Private:        no
Comment:        Arch Linux 2013.10.01 (www.archlinux.org)
Provides:       archlinux-2013.10.01-dual.iso
```

Только выбранные поля для нескольких торрентов:

```
$ emfile torrents/archlinux-2013.0* --name --hash --comment
name: archlinux-2013.05.01-dual.iso
hash: c334d4bc0486692fca78c663015864950a2c21f0
comment: Arch Linux 2013.05.01 (www.archlinux.org)

name: archlinux-2013.09.01-dual.iso
hash: 311c45eecc10639954d80f666c7404309b962a92
comment: Arch Linux 2013.09.01 (www.archlinux.org)
```

Хеши торрентов, без заголовков полей:

```
$ emfile --hash --without-headers torrents/archlinux-2013.0*
c334d4bc0486692fca78c663015864950a2c21f0

311c45eecc10639954d80f666c7404309b962a92
```

Сделать magnet-ссылки с дополнительными полями:

```
$ emfile --make-magnet --magnet-fields name trackers -- torrents/archlinux-2013.0*
make-magnet: magnet:?dn=archlinux-2013.05.01-dual.iso&tr=http%3A%2F%2Ftracker.archlinux.org%3A6969%2Fannounce&xt=urn%3Abtih%3AYM2NJPAEQZUS7STYYZRQCWDESUFCYIPQ

make-magnet: magnet:?dn=archlinux-2013.09.01-dual.iso&tr=http%3A%2F%2Ftracker.archlinux.org%3A6969%2Fannounce&xt=urn%3Abtih%3AGEOEL3WMCBRZSVGYB5TGY5AEGCNZMKUS
```

Если указан относительный путь к файлу, **emfile** попытается найти его в каталоге, указанном параметром `core/torrents_dir` в конфигурации. Подробнее об этом смотрите на странице [config](config).
